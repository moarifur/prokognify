# Complete Workflow for Adding ShadCN UI with Dark Mode to a Next.js Project

Here's a comprehensive, reader-friendly workflow for integrating ShadCN UI with dark mode support in a Next.js application using JavaScript (not TypeScript).

## 1. Project Setup

### Initialize a Next.js Project (if starting fresh)

```bash
npx create-next-app@latest my-app
cd my-app
```

## 2. Install ShadCN UI

Run the initialization command:

```bash
npx shadcn@latest init
```

During initialization:
- Confirm creating the `components.json` file
- Select your preferred base color (e.g., Slate)

Example successful output:

```
✔ You need to create a components.json file to add components. Proceed? ... yes
✔ Which color would you like to use as the base color? » Slate
✔ Writing components.json.
✔ Checking registry.
✔ Installing dependencies.
```

## 3. Add Your First Component

Add a Button component:

```bash
npx shadcn@latest add button
```

Example successful output:

```
✔ Checking registry.
✔ Installing dependencies.
✔ Created 1 file:
  - src/components/ui/button.jsx
```

## 4. Test the Button Component

Create a test page to verify ShadCN is working:

```jsx
// app/page.js
import { Button } from "@/components/ui/button";

export default function HomePage() {
  return (
    <div className="flex items-center justify-center h-96">
      <Button variant="destructive" className="text-5xl p-16">
        Home Page
      </Button>
    </div>
  );
}
```

## 5. Enable Dark Mode

### Install next-themes:

```bash
npm install next-themes
```

### Create a Theme Provider:

```jsx
// components/theme-provider.jsx
"use client";

import { ThemeProvider as NextThemesProvider } from "next-themes";

export const ThemeProvider = ({ children, ...props }) => {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;
};
```

### Update the Root Layout:

```jsx
// app/layout.js
import { ThemeProvider } from "@/components/theme-provider";

export const metadata = {
  title: "Your App Name",
  description: "Your app description",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body>
        <ThemeProvider
          attribute="class"
          defaultTheme="system"
          enableSystem
          disableTransitionOnChange
        >
          {children}
        </ThemeProvider>
      </body>
    </html>
  );
}
```

## 6. Create a Theme Toggle Component

```jsx
// components/theme-toggle.jsx
"use client";

import { Button } from "@/components/ui/button";
import { Moon, Sun } from "lucide-react";
import { useTheme } from "next-themes";

export function ThemeToggle() {
  const { theme, setTheme } = useTheme();

  const toggleTheme = () => {
    setTheme(theme === "dark" ? "light" : "dark");
  };

  return (
    <Button onClick={toggleTheme} variant="outline" size="icon">
      <Sun className="h-[1.2rem] w-[1.2rem] transition-all dark:hidden" />
      <Moon className="hidden h-[1.2rem] w-[1.2rem] transition-all dark:block" />
      <span className="sr-only">Toggle theme</span>
    </Button>
  );
}
```

## 7. Implement the Theme Toggle in Your App

```jsx
// app/page.js
import { Button } from "@/components/ui/button";
import { ThemeToggle } from "@/components/theme-toggle";

export default function HomePage() {
  return (
    <div className="flex flex-col items-center justify-center min-h-screen gap-8">
      <h1 className="text-4xl font-bold">Welcome to My App</h1>

      <div className="flex gap-4">
        <Button variant="default">Primary</Button>
        <Button variant="secondary">Secondary</Button>
        <Button variant="destructive">Destructive</Button>
      </div>

      <ThemeToggle />

      <p className="text-muted-foreground">
        Click the moon/sun icon to toggle theme
      </p>
    </div>
  );
}
```

## 8. Git Commit and Push

Once everything is working correctly, commit your changes:

```bash
git add .
git commit -m "feat: added ShadCN UI setup and implemented theme toggle with dark mode"
git push origin main
```

## 9. Additional Components

Add more ShadCN components as needed:

```bash
npx shadcn@latest add input
npx shadcn@latest add dropdown-menu
npx shadcn@latest add card
```

## 10. Customizing Your Theme

To customize the theme colors, edit your `tailwind.config.js`:

```javascript
// tailwind.config.js
const { fontFamily } = require("tailwindcss/defaultTheme");

/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: [
    "./src/**/*.{js,jsx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ["var(--font-sans)", ...fontFamily.sans],
      },
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        // Add your custom colors here
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
};
```

## 11. Troubleshooting Tips

### Components not updating?
- Run `npx shadcn@latest add component-name --overwrite` to force update

### Dark mode not working?
- Ensure `suppressHydrationWarning` is on the html tag
- Verify you're using `"use client"` in components using the theme hook

### Styles not applying?
- Check your `tailwind.config.js` includes all ShadCN classes
- Verify your `globals.css` includes ShadCN's CSS variables

## Final Notes

This workflow provides a complete setup for ShadCN UI with dark mode support in a Next.js application using JavaScript. The implementation includes:

- ShadCN initialization
- Component addition
- Dark mode configuration
- Theme toggle component
- Customization options
- Troubleshooting guidance

You can now continue building your application with these beautiful, accessible components that support light and dark modes out of the box.